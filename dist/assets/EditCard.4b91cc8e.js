import{R as f,a as w,T as b,u as k,E as S,b as T,$ as z,a0 as c,H as N,t as I,v as R,c as u,j as r,B as a,a2 as m,d as i,g as q,ar as M,h as j,a9 as P,ap as L,a5 as O,I as $}from"./index.da767aa3.js";import{c as G,C as D}from"./CardProvider.e09eb5ac.js";const H=E=>{var p,B,g,y,C,F,h,A;const{t:l}=w(b.card),{cardData:e,isEdit:t}=k(),n=S(),{control:s,watch:Y,formState:{isSubmitting:J,isDirty:K},handleSubmit:v}=T({mode:"onTouched",defaultValues:{id:(p=e==null?void 0:e.id)!=null?p:"",name:(B=e==null?void 0:e.name)!=null?B:"",category:(g=e==null?void 0:e.category)!=null?g:"\u30BF\u30B0\u7A2E\u5225",description:(y=e==null?void 0:e.description)!=null?y:"\u30BF\u30B0\u8AAC\u660E",card_number:(C=e==null?void 0:e.card_number)!=null?C:"\u30BF\u30B0\u756A\u53F7",display:(F=e==null?void 0:e.display)!=null?F:"",tag_creator:(h=e==null?void 0:e.tag_creator)!=null?h:"\u30BF\u30B0\u4F5C\u6210\u8005",app_currency_id:(A=e==null?void 0:e.app_currency_id)!=null?A:null,image:""},resolver:z(c.object({name:c.string().required().min(3),app_currency_id:c.number().nullable().required(),image:c.string().required().min(1)}))}),_=v(async o=>{var x;try{const d={...o,image:(x=o==null?void 0:o.image)==null?void 0:x.name};await G.save(d),n(N.card.list),I(l(t?"common:message.edit_success":"common:message.create_success"))}catch(d){R(d)}});return u("form",{onSubmit:_,children:r(a,{className:"max-w-2xl mx-8 sm:mx-auto border-1 border-[#00A0E9] rounded-4 p-14",children:[u(m,{control:s,name:"id",label:"\u30BF\u30B0ID",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",readOnly:!0,classNameField:"bg-grey-300",className:"mb-16 sm:mb-20"}),u(m,{control:s,label:"\u30BF\u30B0\u540D\u79F0",name:"name",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",required:!0}),r(a,{className:"flex mb-20",children:[u(a,{className:"w-full sm:w-[50%] mt-12 mb-8 sm:mb-0",children:r(i,{variant:"h3",color:"primary",className:"self-center flex items-center w-full py-10 sm:py-0",children:[u(i,{className:"text-black py-4 px-16 rounded-4 bg-yellow mx-8",children:"\u5FC5\u9808"})," ","\u30A2\u30D7\u30EA\u901A\u8CA8"]})}),u(a,{className:"border-grey-400 border-1 rounded-4 w-full",children:u(q,{control:s,name:"category",className:"ml-10",options:[{key:"1",value:1,label:"\u30A4\u30D9\u30F3\u30C8"},{key:"2",value:2,label:"\u30B3\u30FC\u30B9"},{key:"3",value:3,label:"\u30B9\u30DD\u30C3\u30C8"}],row:!0,sx:{"& .MuiSvgIcon-root":{fontSize:17}}})})]}),u(m,{control:s,name:"description",label:"\u30BF\u30B0\u8AAC\u660E",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",multiline:!0,className:"mb-16 sm:mb-20"}),u(m,{control:s,label:"\u30BF\u30B0\u756A\u53F7",name:"card_number",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",required:!0}),u(m,{control:s,label:"\u3088\u304F\u4F7F\u308F\u308C\u308B\u30BF\u30B0",name:"name",placeholder:"\u3088\u304F\u4F7F\u308F\u308C\u308B\u30BF\u30B0",className:"mb-16 sm:mb-20",size:"small"}),r(a,{className:"flex flex-wrap sm:flex-nowrap mb-20",children:[u(a,{className:"w-full sm:w-[50%] mt-12 mb-8 sm:mb-0",children:r(i,{variant:"h3",color:"primary",className:"self-center flex items-center w-full py-10 sm:py-0",children:[u(i,{className:"text-black py-4 px-16 rounded-4 bg-yellow mx-8",children:"\u5FC5\u9808"})," ","\u8868\u793A\u30FB\u975E\u8868\u793A"]})}),u(a,{className:"w-full sm:flex",children:u(M,{control:s,name:"display",options:[{key:"1",value:1,label:"\u8868\u793A"},{key:"2",value:2,label:"\u975E\u8868\u793A"}],row:!0})})]}),u(m,{control:s,name:"tag_creator",label:"\u30BF\u30B0\u4F5C\u6210\u8005",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",readOnly:!0,classNameField:"bg-grey-300",className:"mb-16 sm:mb-20"}),r(a,{className:"text-right",children:[u(j,{variant:"contained",color:"error",onClick:()=>n(N.card.list),className:"ml-auto",children:l("common:btn.delete")}),u(P,{type:"submit",variant:"contained",color:"primary",className:"ml-[10px] bg-blue text-white",children:l("common:btn.new")})]})]})})},U=f.memo(H),V=E=>{const{t:l}=w(b.card),e=L(),{id:t}=O(),n=t!=="new";return console.log(b.card),u(D,{t:l,cardData:e==null?void 0:e.state,isEdit:n,children:u($,{pageTitle:l("title.detail_card"),content:u(U,{})})})},X=f.memo(V);export{X as default};
