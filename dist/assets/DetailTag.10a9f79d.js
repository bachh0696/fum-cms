import{a5 as P,Q as j,v as E,a6 as _,r as F,R as q,E as k,u as I,b as L,$ as M,a0 as $,a7 as D,H as A,t as O,c as s,B as l,j as m,a2 as d,d as o,g as G,a8 as g,h as H,a9 as U,aa as V,a as Q,i as Y,ab as J,I as K,T as W}from"./index.da767aa3.js";import{L as X}from"./ListTagProvider.29579e6e.js";const Z=b=>{const{id:e,type:u}=P(),i=e!=="new",a=j(_.getDetailTag,{manual:!0,onError:y=>{E("Get detail failed!!!")}}),{data:n,run:h,loading:t}=a;return F.exports.useEffect(()=>{i&&h(e,{id:e,type:u})},[]),{isEdit:i,tag:n==null?void 0:n.tag,loadingTag:t,id:e}},ee=b=>{var N,x,C,T,B,v;const{tag:e,isEdit:u}=b,i=k(),{t:a,reservationTableHandler:n}=I();F.exports.useState(0),console.log("============= tag",e);const h=[{value:"event",label:"\u30A4\u30D9\u30F3\u30C8"},{value:"course",label:"\u30B3\u30FC\u30B9"},{value:"spot",label:"\u30B9\u30DD\u30C3\u30C8"}],{control:t,handleSubmit:y,formState:{isSubmitting:R,isDirty:w},watch:c,setValue:f}=L({mode:"onTouched",defaultValues:{id:(N=e==null?void 0:e.id)!=null?N:null,name:(x=e==null?void 0:e.name)!=null?x:"",type:(C=e==null?void 0:e.type)!=null?C:"",detail:(T=e==null?void 0:e.detail)!=null?T:"",order:(B=e==null?void 0:e.order)!=null?B:null,frequently_used:!!(e!=null&&e.frequently_used),display:(v=e==null?void 0:e.display)!=null?v:0,author:"\u30BF\u30B0\u4F5C\u6210\u8005",show:(e==null?void 0:e.display)===1,hide:(e==null?void 0:e.display)===0},resolver:M($.object({}))});D(()=>{f("hide",!c("show"))},[c("show")]),D(()=>{f("show",!c("hide"))},[c("hide")]),console.log("============= watch()",c());const S=y(async r=>{r.display=r!=null&&r.show?1:0,r.frequently_used=r!=null&&r.frequently_used?1:0;const{hide:le,show:te,...z}=r;try{await _.save(z),i(A.tag.list),O(a(u?"common:message.edit_success":"common:message.create_success"))}catch(p){E(p==null?void 0:p.message)}});return s("form",{onSubmit:S,children:s(l,{className:"grid grid-flow-row-dense grid-cols-12 pb-20",children:m(l,{className:"col-span-12 sm:col-span-10 sm:col-start-2 pt-20",children:[s(d,{label:a("title.id"),control:t,name:"id",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",classNameField:"bg-grey-300",className:"mb-16 sm:mb-20",readOnly:!0}),s(d,{label:a("title.name"),control:t,name:"name",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",className:"mb-16 sm:mb-20",required:!0}),m(l,{className:"my-12 flex",children:[s(l,{className:"w-full sm:w-1/3 mt-12 text-primary mb-8 sm:mb-0",children:m(o,{variant:"h3",color:"primary",className:"flex items-center mb-4",children:[s(o,{className:"text-black py-4 px-16 rounded-4 bg-yellow mx-8",children:"\u5FC5\u9808"})," ",a("title.tag_type")]})}),s(l,{className:"w-full sm:w-2/3 border-grey-400 border-1 rounded-4",children:s(G,{control:t,name:"type",row:!0,options:h,className:"ml-20"})})]}),s(d,{label:a("title.description"),control:t,name:"detail",className:"mb-16 sm:mb-20",size:"small",minRows:5,multiline:!0}),s(d,{label:a("title.number_tag"),control:t,name:"order",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",required:!0}),m(l,{className:"my-12 flex",children:[s(l,{className:"w-full sm:w-1/3 mt-12 text-primary mb-8 sm:mb-0",children:m(o,{variant:"h3",color:"primary",className:"flex items-center mb-4",children:[s(o,{className:"w-72"})," ",a("title.popular_tag")]})}),s(l,{className:"w-full sm:w-2/3 border-grey-400 border-1 rounded-4",children:s(g,{control:t,name:"frequently_used",row:!0,label:a("title.test"),className:"ml-20"})})]}),m(l,{className:"my-12 flex",children:[s(l,{className:"w-full sm:w-1/3 mt-12 text-primary mb-8 sm:mb-0",children:m(o,{variant:"h3",color:"primary",className:"flex items-center mb-4",children:[s(o,{className:"text-black py-4 px-16 rounded-4 w-60 bg-yellow mx-8",children:"\u5FC5\u9808"})," ",a("title.hide/show")]})}),m(l,{className:"w-full flex sm:w-2/3 border-grey-400 border-1 rounded-4",children:[s(g,{control:t,name:"show",row:!0,label:a("title.show"),className:"ml-20"}),s(g,{control:t,name:"hide",row:!0,label:a("title.hide"),className:"ml-20"})]})]}),s(d,{label:a("title.tag_creator"),control:t,name:"author",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",classNameField:"bg-grey-300",className:"mb-16 sm:mb-20",readOnly:!0}),s(l,{className:"flex flex-wrap sm:flex-nowrap mb-16 sm:mb-20",children:m(l,{className:"w-full mt-12 mb-8 sm:mb-0 text-end",children:[s(H,{onClick:()=>i(A.tag.list),variant:"contained",className:"mr-10 h-32 text-13",color:"error",size:"small",children:"\u524A\u9664"}),s(U,{type:"submit",loading:R,disabled:!w,variant:"contained",color:"success",className:V("ml-[10px] h-32 text-13 text-white",w?"bg-blue":"bg-gray-500"),size:"small",children:"\u767B\u9332"})]})})]})})})},se=q.memo(ee),ae=b=>{const{t:e}=Q(W.tag),{isEdit:u,tag:i,loadingTag:a,id:n}=Z();return a?s(Y,{className:"text-center mt-40",children:s(J,{})}):s(X,{t:e,children:s(K,{pageTitle:e("title.tag"),content:s(se,{tag:i,isEdit:u})})})},ie=q.memo(ae);export{ie as default};
