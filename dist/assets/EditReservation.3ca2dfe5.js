import{R as $,u as ee,a5 as le,E as se,ap as ae,b as te,$ as ie,a0 as m,S as re,H as ue,t as me,v as oe,c as s,B as o,j as d,a2 as r,a4 as ne,d as M,g as be,ar as P,h as de,a9 as ce,aa as pe,a as ge,I as fe,T as he}from"./index.8e71033d.js";import{L as ye}from"./ListReservationProvider.b44de997.js";const ve=G=>{var f,h,y,v,_,C,x,N,w,B,A,D,E,R,q,T,z,F,k,L,S,j,I,O;const{t:a,reservationTableHandler:xe,tags:c}=ee(),{id:H}=le(),K=H!=="new",U=se(),e=ae();console.log("============= location",e),a("edit.form.check_box.label.express"),a("edit.form.check_box.label.representation");const Y=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],J=(f=c==null?void 0:c.tags)==null?void 0:f.reduce((l,t)=>{const u={key:`${t==null?void 0:t.id}`,value:t==null?void 0:t.id,label:t==null?void 0:t.name};return l.push(u),l},[]),Q=(l=[])=>{if(!l||l.length<=0)return{};var t={};return l.forEach(u=>{const n=e.state.tags.find(p=>p.name===u);n&&(t={...t,[n.id]:!0})}),t},W=[{key:"1",label:"\u30D5\u30A9\u30C8"},{key:"2",label:"\u97F3\u697D\u518D\u751F"},{key:"3",label:"\u30AF\u30A4\u30BA"},{key:"4",label:"\u7279\u5225\u30DD\u30A4\u30F3\u30C8"}],{control:i,formState:{isSubmitting:X,isDirty:g},handleSubmit:Z}=te({mode:"onTouched",defaultValues:{id:(y=(h=e==null?void 0:e.state)==null?void 0:h.id)!=null?y:"",type:(_=(v=e==null?void 0:e.state)==null?void 0:v.type)!=null?_:1,name:(x=(C=e==null?void 0:e.state)==null?void 0:C.name)!=null?x:"",detail:(w=(N=e==null?void 0:e.state)==null?void 0:N.detail)!=null?w:"",address:(A=(B=e==null?void 0:e.state)==null?void 0:B.address)!=null?A:"",tel:(E=(D=e==null?void 0:e.state)==null?void 0:D.tel)!=null?E:"",url:(q=(R=e==null?void 0:e.state)==null?void 0:R.url)!=null?q:"",google_map_url:(z=(T=e==null?void 0:e.state)==null?void 0:T.google_map_url)!=null?z:"",location_info_latitude:(k=(F=e==null?void 0:e.state)==null?void 0:F.location_info_latitude)!=null?k:"",location_info_longitude:(S=(L=e==null?void 0:e.state)==null?void 0:L.location_info_longitude)!=null?S:"",image:"",tag:Q((j=e==null?void 0:e.state)==null?void 0:j.tag),facility:(O=(I=e==null?void 0:e.state)==null?void 0:I.type)!=null?O:[]},resolver:ie(m.object({name:m.string().required(),detail:m.string().required(),address:m.string().required(),location_info_latitude:m.string().required(),location_info_longitude:m.string().required()}))}),V=Z(async l=>{var t;try{const u=[],n=[];for(const b in l==null?void 0:l.facility)l!=null&&l.facility[b]&&u.push(+b);for(const b in l==null?void 0:l.tag)l!=null&&l.tag[b]&&n.push(+b);const p={...l,tag:n,facility:u,image:(t=l==null?void 0:l.image)==null?void 0:t.name,type:+(l==null?void 0:l.type)};await re.save(p),U(ue.spot.list),me(K?"Edit success":"Create success")}catch(u){oe(u)}},l=>console.log("============= err",l));return s("form",{onSubmit:V,sx:{padding:2},children:s(o,{className:"grid grid-flow-row-dense grid-cols-12 pb-20",children:d(o,{className:"col-span-12 sm:col-span-10 sm:col-start-2 pt-20",children:[s(r,{label:a("edit.form.label.id"),control:i,name:"id",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",classNameField:"bg-grey-300",className:"mb-16 sm:mb-20",readOnly:!0}),s(r,{label:a("edit.form.label.name"),control:i,name:"name",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",required:!0}),s(r,{label:a("edit.form.label.description"),control:i,name:"detail",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",minRows:5,multiline:!0,required:!0}),s(ne,{label:"\u30B9\u30C3\u30DD\u30C8\u753B\u50CF",control:i,name:"image",size:"small",className:"w-full sm:w-2/3 mb-16 sm:mb-20",helperText:!0}),d(o,{className:"flex flex-wrap sm:flex-nowrap mb-16 sm:mb-20",children:[s(o,{className:"w-full sm:w-1/3 mt-12 mb-8 sm:mb-0",children:d(M,{variant:"h3",color:"primary",className:"flex items-center mb-4",children:[s(M,{className:"text-black py-4 px-16 rounded-4 bg-yellow mx-8",children:"\u5FC5\u9808"})," ",a("edit.form.label.type")]})}),s(o,{className:"border-grey-400 border-1 rounded-4 w-full sm:w-2/3 pl-[15px]",children:s(be,{className:"flex-row",control:i,name:"type",options:Y,row:!0})})]}),s(r,{label:a("edit.form.label.address"),control:i,name:"address",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",required:!0}),s(r,{label:a("edit.form.label.phone_number"),control:i,name:"tel",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small"}),s(r,{label:a("edit.form.label.web_url"),control:i,name:"url",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small"}),s(r,{control:i,label:a("edit.form.label.location_info_latitude"),name:"location_info_latitude",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small",required:!0}),s(r,{control:i,label:a("edit.form.label.location_info_longitude"),name:"location_info_longitude",className:"mb-16 sm:mb-20",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",size:"small",required:!0}),s(r,{label:a("edit.form.label.google_map_url"),control:i,name:"google_map_url",placeholder:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5165\u529B",className:"mb-16 sm:mb-20",size:"small"}),s(P,{control:i,name:"tag",options:J,legendLabel:a("edit.form.label.tag"),row:!0,required:!0}),s(P,{control:i,name:"facility",options:W,legendLabel:a("edit.form.label.special_action"),row:!0,required:!0}),d(o,{className:"flex flex-wrap sm:flex-nowrap mb-20",children:[s(de,{variant:"contained",color:"error",className:"ml-auto h-32",children:a("edit.form.btn.delete")}),s(ce,{type:"submit",variant:"contained",color:"primary",loading:X,disabled:!g,className:pe("ml-[10px] h-32 text-13 text-white",g?"bg-blue":"bg-gray-500"),children:a("edit.form.btn.register")})]})]})})})},_e=$.memo(ve),Ce=G=>{const{t:a}=ge(he.reservation);return s(ye,{t:a,children:s(fe,{pageTitle:a("title.spot"),content:s(_e,{})})})},Be=$.memo(Ce);export{Be as default};
